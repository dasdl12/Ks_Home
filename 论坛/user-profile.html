<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户主页 - 张小明</title>
    
    <link rel="stylesheet" href="../components/header.css">
    <style>
        :root {
            --forum-primary: #E60012;
            --bg-light: #F8F9FA;
            --text-primary: #333333;
            --text-secondary: #666666;
            --border-light: #E5E5E5;
            --ks-red: #E60012;
            --ks-white: #FFFFFF;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--bg-light);
            line-height: 1.6;
        }

        /* Header 使用统一组件样式，移除本页重复定义，避免冲突 */

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            height: 72px;
        }

        .logo {
            height: 30px;
            margin-right: 48px;
        }

        .logo img {
            height: 100%;
            width: auto;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 32px;
            flex: 1;
        }

        .nav-item {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-item:hover {
            color: var(--ks-red);
            background: rgba(230, 0, 18, 0.05);
        }

        .nav-item.active {
            color: var(--ks-red);
            background: rgba(230, 0, 18, 0.1);
            font-weight: 600;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .user-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .avatar-img {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-size: cover;
            background-position: center;
        }

        /* 面包屑导航 */
        .breadcrumb {
            background: white;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .breadcrumb-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .breadcrumb-nav {
            display: flex;
            align-items: center;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .breadcrumb-nav a {
            color: var(--text-secondary);
            text-decoration: none;
        }

        .breadcrumb-nav a:hover {
            color: var(--forum-primary);
        }

        .breadcrumb-separator {
            margin: 0 8px;
        }

        /* 主容器 */
        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }
        
        /* 布局容器 */
        .profile-layout {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        /* 用户成就墙 - 简约紧凑设计 */
        .user-achievement-wall {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            flex: 1;
            min-width: 0;
        }

        .user-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .user-info {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            flex: 1;
            min-width: 280px;
        }

        .user-main-avatar {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            background: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .user-main-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .user-details {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
        }

        .user-name {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
            margin: 0;
        }

        .user-dept-info {
            font-size: 14px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 2px 0;
        }

        .user-level {
            background: var(--forum-primary);
            color: white;
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 500;
        }

        .user-signature {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
            padding: 6px 10px;
            background: rgba(230, 0, 18, 0.02);
            border-radius: 4px;
            margin: 4px 0 6px 0;
        }

        .follow-user-btn {
            padding: 8px 16px;
            background: var(--forum-primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            height: fit-content;
            white-space: nowrap;
        }

        .follow-user-btn:hover {
            background: #cc0010;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(230, 0, 18, 0.2);
        }

        /* 用户统计数据 */
        .user-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 16px;
            padding-top: 8px;
            border-top: 1px solid #f0f0f0;
        }

        .stat-card {
            text-align: center;
            padding: 8px 4px;
            background: #f9f9f9;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            background: rgba(230, 0, 18, 0.05);
            transform: translateY(-1px);
        }

        .stat-number {
            font-size: 16px;
            font-weight: bold;
            color: var(--forum-primary);
            display: block;
            margin-bottom: 1px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* 身份和成就 - 将在荣誉墙中显示 */
        .identity-badge {
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .achievement-badge {
            background: #ffd700;
            color: #8b4513;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        /* 荣誉墙样式 */
        .honor-wall {
            background: white;
            border-radius: 12px;
            padding: 10px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            width: 180px;
            min-width: 180px;
            display: flex;
            flex-direction: column;
        }
        
        .honor-wall-header {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .honor-wall-icon {
            font-size: 14px;
        }
        
        .honor-badges {
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex: 1;
        }
        
        .honor-card {
            background: #f9f9f9;
            border-radius: 5px;
            padding: 8px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .honor-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
        }
        
        .honor-card-icon {
            font-size: 22px;
            margin-bottom: 3px;
            display: block;
        }
        
        .honor-card-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .honor-card-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--forum-primary), #ffd700);
        }
        
        /* 为不同类型的荣誉徽章添加不同的渐变 */
        .honor-card.high-potential .honor-card-gradient {
            background: linear-gradient(90deg, #ff4d4f, #ff9a44);
        }
        
        .honor-card.finance-expert .honor-card-gradient {
            background: linear-gradient(90deg, #52c41a, #1890ff);
        }
        
        .honor-card.contributor .honor-card-gradient {
            background: linear-gradient(90deg, #722ed1, #eb2f96);
        }

        /* 最近动态 */
        .recent-activities {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .activities-tabs {
            display: flex;
            justify-content: center;
            gap: 16px;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-light);
            background: #f8f9fa;
        }

        .activity-tab {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: white;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            min-width: 120px;
            justify-content: center;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .activity-tab.active {
            background: var(--forum-primary);
            color: white;
            box-shadow: 0 1px 4px rgba(230, 0, 18, 0.2);
        }

        .activity-tab:hover:not(.active) {
            background: rgba(230, 0, 18, 0.05);
            color: var(--forum-primary);
        }

        .activities-content {
            padding: 16px 24px;
        }

        .activity-item {
            padding: 16px 0;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .activity-item:hover {
            background: rgba(230, 0, 18, 0.02);
            transform: translateX(2px);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .activity-type {
            background: var(--forum-primary);
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 500;
        }

        .activity-time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .activity-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
            line-height: 1.4;
        }

        .activity-description {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .activity-stats {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .activity-stat {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        /* 专业标签 */
        .expertise-tags {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .expertise-tag {
            background: rgba(230, 0, 18, 0.08);
            color: var(--forum-primary);
            padding: 3px 8px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
            border: 1px solid rgba(230, 0, 18, 0.1);
            transition: all 0.2s ease;
        }

        .expertise-tag:hover {
            background: rgba(230, 0, 18, 0.12);
            transform: translateY(-1px);
        }

        /* 空状态 */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-text {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .empty-subtext {
            font-size: 14px;
            opacity: 0.7;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .profile-container {
                padding: 16px;
            }
            
            .profile-layout {
                flex-direction: column;
            }
            
            .honor-wall {
                width: 100%;
                min-width: 0;
            }
            
            .honor-badges {
                flex-direction: row;
                overflow-x: auto;
                padding-bottom: 8px;
                gap: 12px;
            }
            
            .honor-card {
                flex-shrink: 0;
                width: 160px;
            }

            .user-info {
                flex-direction: column;
                text-align: center;
                gap: 16px;
            }

            .user-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        /* 用户头像下拉菜单样式 */
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-dropdown);
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            z-index: 1000;
            border: 1px solid #E5E7EB;
        }

        .user-avatar:hover .user-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown .dropdown-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: var(--ks-dark);
            text-decoration: none;
            transition: background-color 0.2s ease;
            cursor: pointer;
        }

        .user-dropdown .dropdown-item:hover {
            background-color: #F9FAFB;
        }

        .user-dropdown .dropdown-item img {
            width: 16px;
            height: 16px;
            margin-right: 12px;
            opacity: 0.7;
        }

        .user-dropdown .dropdown-divider {
            height: 1px;
            background-color: #E5E7EB;
            margin: 4px 0;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <img src="../01-金山 金山云logo-04.png" alt="金山云">
            </div>
            <nav class="nav-menu">
                <a href="../index.html" class="nav-item">首页</a>
                <div class="nav-dropdown">
                    <div class="nav-dropdown-trigger">
                        <a href="#" class="nav-item">AI工具</a>
                        <img src="../icon/下拉箭头.svg" class="dropdown-arrow" alt="下拉">
                    </div>
                    <div class="dropdown-menu">
                        <a href="../ai-tools.html" class="dropdown-item">AI工具库</a>
                        <a href="../ai-practices.html" class="dropdown-item">AI实战</a>
                        <a href="../ai-toolkits.html" class="dropdown-item">专题工具箱</a>
                    </div>
                </div>
                <div class="nav-dropdown forum-dropdown">
                    <div class="nav-dropdown-trigger">
                        <a href="./forum.html" class="nav-item active">同事论坛</a>
                        <img src="../icon/下拉箭头.svg" class="dropdown-arrow" alt="下拉">
                    </div>
                    <div class="dropdown-menu forum-dropdown-menu">
                        <div class="forum-dropdown-content">
                            <div class="forum-dropdown-section">
                                <h4 class="dropdown-section-title">论坛</h4>
                                <div class="dropdown-items">
                                    <a href="./forum.html?category=qa" class="dropdown-item">问答回响</a>
                                    <a href="./forum.html?category=knowledge" class="dropdown-item">知识分享</a>
                                    <a href="./forum.html?category=life" class="dropdown-item">生活文娱</a>
                                </div>
                            </div>
                            <div class="forum-dropdown-section">
                                <h4 class="dropdown-section-title">资讯</h4>
                                <div class="dropdown-items">
                                    <a href="./forum.html?tab=news&category=company" class="dropdown-item">公司大事</a>
                                    <a href="./forum.html?tab=news&category=culture" class="dropdown-item">文化长廊</a>
                                    <a href="./forum.html?tab=news&category=tech" class="dropdown-item">技术洞察</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <a href="#" class="nav-item">学习平台</a>
                <a href="#" class="nav-item">企业活动</a>
            </nav>
            <div class="header-right">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索...">
                    <button class="search-btn">
                        <img src="../icon/搜索.png" alt="搜索" style="width: 16px; height: 16px;">
                    </button>
                </div>
                <button class="notification-btn">
                    <img src="../icon/通知.png" alt="通知">
                    <div class="notification-badge"></div>
                </button>
                <div class="user-avatar">
                    <div class="avatar-img" style="background-image: url('../头像/张秋实-技术委员会.png'); background-size: cover; background-position: center;"></div>
                    <div class="user-dropdown">
                        <div class="dropdown-item" onclick="window.location.href='../profile.html'">
                            <img src="../icon/用户.svg" alt="个人中心">
                            <span>个人中心</span>
                        </div>
                        <div class="dropdown-item">
                            <img src="../icon/目标.svg" alt="我的成就">
                            <span>我的成就</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item">
                            <img src="../icon/文件夹.svg" alt="设置">
                            <span>设置</span>
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            <img src="../icon/时间.svg" alt="退出">
                            <span>退出登录</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- 面包屑导航 -->
    <div class="breadcrumb">
        <div class="breadcrumb-container">
            <nav class="breadcrumb-nav">
                <a href="../index.html">首页</a>
                <span class="breadcrumb-separator">></span>
                <a href="forum.html">同事论坛</a>
                <span class="breadcrumb-separator">></span>
                <span>用户：<span id="username">张小明</span></span>
            </nav>
        </div>
    </div>

    <!-- 主容器 -->
    <div class="profile-container">
        <!-- 布局容器 -->
        <div class="profile-layout">
            <!-- 用户成就墙 -->
            <div class="user-achievement-wall">
                <!-- 用户头部信息 -->
                <div class="user-header">
                    <div class="user-info">
                        <div class="user-main-avatar" id="userAvatar">张</div>
                        <div class="user-details">
                            <div class="user-name" id="userName">张小明</div>
                            <div class="user-dept-info">
                                <span id="userDept">财务部</span>
                                <span>·</span>
                                <span id="userExperience">3年</span>
                                <span class="user-level" id="userLevel">LV6专家</span>
                            </div>
                            <div class="user-signature" id="userSignature">
                                精于财务分析，热爱数据洞察 | 让每一个数字都有意义
                            </div>
                            <div class="expertise-tags">
                                <span class="expertise-tag">财务管理</span>
                                <span class="expertise-tag">成本控制</span>
                                <span class="expertise-tag">预算分析</span>
                                <span class="expertise-tag">数据分析</span>
                                <span class="expertise-tag">Excel建模</span>
                            </div>
                        </div>
                    </div>
                    <button class="follow-user-btn" onclick="followUser()">
                        ➕ 关注用户
                    </button>
                </div>

                <!-- 用户统计数据 -->
                <div class="user-stats">
                    <div class="stat-card">
                        <span class="stat-number" id="followersCount">45</span>
                        <span class="stat-label">被关注</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="followingCount">12</span>
                        <span class="stat-label">关注</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="postsCount">23</span>
                        <span class="stat-label">发帖</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="likesCount">156</span>
                        <span class="stat-label">获赞</span>
                    </div>
                </div>
            </div>

            <!-- 荣誉墙 -->
            <div class="honor-wall">
                <div class="honor-wall-header">
                    <span class="honor-wall-icon">🏆</span>
                    个人荣誉墙
                </div>
                <div class="honor-badges">
                    <!-- 高潜人才徽章 -->
                    <div class="honor-card high-potential">
                        <span class="honor-card-icon">🏆</span>
                        <div class="honor-card-title">高潜人才</div>
                        <div class="honor-card-gradient"></div>
                    </div>
                    
                    <!-- 财务专家徽章 -->
                    <div class="honor-card finance-expert">
                        <span class="honor-card-icon">🎯</span>
                        <div class="honor-card-title">财务专家</div>
                        <div class="honor-card-gradient"></div>
                    </div>
                    
                    <!-- 专业贡献者徽章 -->
                    <div class="honor-card contributor">
                        <span class="honor-card-icon">🏅</span>
                        <div class="honor-card-title">专业贡献者</div>
                        <div class="honor-card-gradient"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 最近动态 -->
        <div class="recent-activities">
            <div class="activities-tabs">
                <button class="activity-tab active" onclick="switchActivityTab('posts')" data-tab="posts">
                    📝 最近发帖
                </button>
                <button class="activity-tab" onclick="switchActivityTab('ai-tools')" data-tab="ai-tools">
                    🤖 AI爱用
                </button>
                <button class="activity-tab" onclick="switchActivityTab('learning')" data-tab="learning">
                    📚 最近在学
                </button>
            </div>
            <div class="activities-content" id="activitiesList">
                <!-- 内容将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <script>
        // 模拟用户数据
        const userData = {
            posts: [
                {
                    id: 1,
                    title: "关于差旅费报销新规定的疑问",
                    description: "大家好，我想请教一下关于最近公司发布的差旅费报销新规定的几个问题...",
                    time: "2小时前",
                    views: 127,
                    likes: 15,
                    comments: 8
                },
                {
                    id: 2,
                    title: "财务报表分析模板分享",
                    description: "整理了一套完整的财务报表分析模板，包含资产负债表、利润表、现金流量表的关键指标分析...",
                    time: "3天前",
                    views: 234,
                    likes: 28,
                    comments: 12
                },
                {
                    id: 3,
                    title: "年度预算编制经验总结",
                    description: "分享一下这几年在预算编制方面的经验和心得，希望对大家有所帮助...",
                    time: "1周前",
                    views: 189,
                    likes: 22,
                    comments: 9
                }
            ],
            aiTools: [
                {
                    id: 1,
                    name: "财务数据分析助手",
                    description: "用于快速分析财务报表和生成可视化图表",
                    usage: "使用23次",
                    lastUsed: "昨天",
                    rating: 5
                },
                {
                    id: 2,
                    name: "预算编制工具",
                    description: "智能辅助年度和季度预算的制定与调整",
                    usage: "使用15次",
                    lastUsed: "3天前",
                    rating: 4
                },
                {
                    id: 3,
                    name: "成本分析工具",
                    description: "深度分析各部门成本构成和优化建议",
                    usage: "使用8次",
                    lastUsed: "1周前",
                    rating: 4
                }
            ],
            learning: [
                {
                    id: 1,
                    course: "数据分析在财务管理中的应用",
                    progress: 85,
                    provider: "内部培训平台",
                    lastStudy: "昨天",
                    duration: "12小时"
                },
                {
                    id: 2,
                    course: "Python财务建模实战",
                    progress: 60,
                    provider: "在线学习平台",
                    lastStudy: "3天前",
                    duration: "20小时"
                },
                {
                    id: 3,
                    course: "企业财务风险管理",
                    progress: 40,
                    provider: "专业认证机构",
                    lastStudy: "1周前",
                    duration: "15小时"
                }
            ]
        };

        let currentTab = 'posts';

        // 切换标签页
        function switchActivityTab(tab) {
            if (currentTab === tab) return;
            
            currentTab = tab;
            
            // 更新按钮状态
            document.querySelectorAll('.activity-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
            
            // 添加过渡动画效果
            const container = document.getElementById('activitiesList');
            container.style.opacity = '0';
            container.style.transform = 'translateY(20px)';
            container.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            
            setTimeout(() => {
                // 加载对应内容
                loadTabContent(tab);
                // 显示内容
                container.style.opacity = '1';
                container.style.transform = 'translateY(0)';
            }, 200);
        }

        // 加载标签页内容
        function loadTabContent(tab) {
            const container = document.getElementById('activitiesList');
            let content = '';
            
            switch(tab) {
                case 'posts':
                    content = loadPostsContent();
                    break;
                case 'ai-tools':
                    content = loadAIToolsContent();
                    break;
                case 'learning':
                    content = loadLearningContent();
                    break;
                default:
                    content = loadPostsContent();
            }
            
            container.innerHTML = content;
            // 添加波纹效果
            addRippleEffect();
        }

        // 加载发帖内容
        function loadPostsContent() {
            if (userData.posts.length === 0) {
                return `
                    <div class="empty-state">
                        <div class="empty-icon">📝</div>
                        <div class="empty-text">暂无发帖</div>
                        <div class="empty-subtext">该用户还没有发布任何帖子</div>
                    </div>
                `;
            }

            return userData.posts.map(post => `
                <div class="activity-item" onclick="viewPostDetail(${post.id})
                    data-id="${post.id}" data-type="post">
                    <div class="activity-header">
                        <span class="activity-type">发帖</span>
                        <span class="activity-time">${post.time}</span>
                    </div>
                    <div class="activity-title">${post.title}</div>
                    <div class="activity-description">${post.description}</div>
                    <div class="activity-stats">
                        <span class="activity-stat">👁️ ${post.views}</span>
                        <span class="activity-stat">👍 ${post.likes}</span>
                        <span class="activity-stat">💬 ${post.comments}</span>
                    </div>
                </div>
            `).join('');
        }

        // 加载AI工具内容
        function loadAIToolsContent() {
            if (userData.aiTools.length === 0) {
                return `
                    <div class="empty-state">
                        <div class="empty-icon">🤖</div>
                        <div class="empty-text">暂无AI工具使用记录</div>
                        <div class="empty-subtext">该用户还没有使用过AI工具</div>
                    </div>
                `;
            }

            return userData.aiTools.map(tool => `
                <div class="activity-item" onclick="viewAIToolDetail(${tool.id})
                    data-id="${tool.id}" data-type="tool">
                    <div class="activity-header">
                        <span class="activity-type">AI工具</span>
                        <span class="activity-time">${tool.lastUsed}</span>
                    </div>
                    <div class="activity-title">${tool.name}</div>
                    <div class="activity-description">${tool.description}</div>
                    <div class="activity-stats">
                        <span class="activity-stat">📊 ${tool.usage}</span>
                        <span class="activity-stat">⭐ ${tool.rating}分</span>
                    </div>
                </div>
            `).join('');
        }

        // 加载学习内容
        function loadLearningContent() {
            if (userData.learning.length === 0) {
                return `
                    <div class="empty-state">
                        <div class="empty-icon">📚</div>
                        <div class="empty-text">暂无学习记录</div>
                        <div class="empty-subtext">该用户还没有学习记录</div>
                    </div>
                `;
            }

            return userData.learning.map(course => `
                <div class="activity-item" onclick="viewCourseDetail(${course.id})
                    data-id="${course.id}" data-type="course">
                    <div class="activity-header">
                        <span class="activity-type">学习</span>
                        <span class="activity-time">${course.lastStudy}</span>
                    </div>
                    <div class="activity-title">${course.course}</div>
                    <div class="activity-description">来源：${course.provider} | 总时长：${course.duration}</div>
                    <div class="activity-stats">
                        <span class="activity-stat">📈 进度 ${course.progress}%</span>
                        <div style="background: #e9ecef; border-radius: 10px; height: 4px; width: 100px; display: inline-block; margin-left: 8px;">
                            <div style="background: var(--forum-primary); border-radius: 10px; height: 100%; width: ${course.progress}%; transition: width 0.3s ease;"></div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // 关注用户
        function followUser() {
            const btn = document.querySelector('.follow-user-btn');
            const isFollowing = btn.textContent.includes('已关注');
            
            // 添加关注/取消关注动画
            btn.style.transition = 'all 0.3s ease';
            btn.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                if (isFollowing) {
                    btn.innerHTML = '➕ 关注用户';
                    btn.style.background = 'var(--forum-primary)';
                    // 添加提示动画
                    showToast('已取消关注');
                    // 更新关注数
                    animateNumberChange('followersCount', -1);
                } else {
                    btn.innerHTML = '✅ 已关注';
                    btn.style.background = '#28a745';
                    // 添加提示动画
                    showToast('关注成功');
                    // 更新关注数
                    animateNumberChange('followersCount', 1);
                }
                
                // 恢复按钮大小
                btn.style.transform = 'scale(1)';
            }, 150);
        }

        // 数字变化动画
        function animateNumberChange(elementId, change) {
            const element = document.getElementById(elementId);
            const startValue = parseInt(element.textContent);
            const endValue = startValue + change;
            const duration = 500; // 动画持续时间（毫秒）
            const startTime = performance.now();
            
            function updateNumber(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);
                const currentValue = Math.floor(startValue + (endValue - startValue) * progress);
                
                element.textContent = currentValue;
                
                if (progress < 1) {
                    requestAnimationFrame(updateNumber);
                } else {
                    element.textContent = endValue;
                }
            }
            
            requestAnimationFrame(updateNumber);
        }

        // 显示提示信息
        function showToast(message) {
            // 检查是否已存在toast
            let toast = document.querySelector('.toast-message');
            
            if (!toast) {
                // 创建新的toast
                toast = document.createElement('div');
                toast.className = 'toast-message';
                document.body.appendChild(toast);
                
                // 添加toast样式
                Object.assign(toast.style, {
                    position: 'fixed',
                    top: '50%',
                    left: '50%',
                    transform: 'translate(-50%, -50%)',
                    background: 'rgba(0, 0, 0, 0.8)',
                    color: 'white',
                    padding: '12px 24px',
                    borderRadius: '8px',
                    fontSize: '14px',
                    zIndex: '9999',
                    opacity: '0',
                    transition: 'opacity 0.3s ease'
                });
            }
            
            // 设置消息内容
            toast.textContent = message;
            
            // 显示toast
            toast.style.opacity = '1';
            
            // 3秒后隐藏
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 2000);
        }

        // 查看帖子详情
        function viewPostDetail(postId) {
            const post = userData.posts.find(p => p.id === postId);
            if (post) {
                // 添加点击波纹效果
                const event = window.event;
                if (event) {
                    const target = event.target.closest('.activity-item');
                    if (target) {
                        createRipple(event, target);
                        
                        // 延迟跳转，等待波纹动画完成
                        setTimeout(() => {
                            window.location.href = `post-detail.html?id=${postId}&title=${encodeURIComponent(post.title)}`;
                        }, 300);
                        
                        event.preventDefault();
                        return;
                    }
                }
                
                window.location.href = `post-detail.html?id=${postId}&title=${encodeURIComponent(post.title)}`;
            }
        }

        // 查看AI工具详情
        function viewAIToolDetail(toolId) {
            const tool = userData.aiTools.find(t => t.id === toolId);
            if (tool) {
                // 添加点击波纹效果
                const event = window.event;
                if (event) {
                    const target = event.target.closest('.activity-item');
                    if (target) {
                        createRipple(event, target);
                    }
                }
                
                alert(`查看AI工具详情: ${tool.name}\n${tool.description}\n使用情况: ${tool.usage}`);
            }
        }

        // 查看课程详情  
        function viewCourseDetail(courseId) {
            const course = userData.learning.find(c => c.id === courseId);
            if (course) {
                // 添加点击波纹效果
                const event = window.event;
                if (event) {
                    const target = event.target.closest('.activity-item');
                    if (target) {
                        createRipple(event, target);
                    }
                }
                
                alert(`查看学习详情: ${course.course}\n来源: ${course.provider}\n进度: ${course.progress}%`);
            }
        }

        // 添加点击波纹效果
        function addRippleEffect() {
            const elements = document.querySelectorAll('.activity-item, .follow-user-btn, .stat-card, .expertise-tag');
            
            elements.forEach(element => {
                // 移除已有的点击事件监听器
                const newElement = element.cloneNode(true);
                element.parentNode.replaceChild(newElement, element);
                
                // 添加点击波纹效果
                newElement.addEventListener('click', function(e) {
                    if (!this.classList.contains('follow-user-btn') && 
                        !this.classList.contains('stat-card') && 
                        !this.classList.contains('expertise-tag')) {
                        return; // 不拦截已有的点击事件
                    }
                    
                    createRipple(e, this);
                });
            });
        }

        // 创建波纹效果
        function createRipple(event, element) {
            // 获取点击位置
            const rect = element.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            // 创建波纹元素
            const ripple = document.createElement('div');
            ripple.classList.add('ripple');
            
            // 设置波纹样式
            Object.assign(ripple.style, {
                position: 'absolute',
                width: '100px',
                height: '100px',
                borderRadius: '50%',
                background: 'rgba(255, 255, 255, 0.4)',
                transform: 'translate(-50%, -50%) scale(0)',
                top: `${y}px`,
                left: `${x}px`,
                pointerEvents: 'none',
                zIndex: '10'
            });
            
            // 添加波纹到元素
            element.style.position = 'relative';
            element.appendChild(ripple);
            
            // 播放动画
            setTimeout(() => {
                Object.assign(ripple.style, {
                    transform: 'translate(-50%, -50%) scale(2.5)',
                    opacity: '0',
                    transition: 'transform 0.6s ease, opacity 0.6s ease'
                });
            }, 10);
            
            // 动画结束后移除元素
            setTimeout(() => {
                if (ripple.parentNode) {
                    ripple.parentNode.removeChild(ripple);
                }
            }, 700);
        }

        // 专业标签点击事件
        function setupExpertiseTags() {
            const tags = document.querySelectorAll('.expertise-tag');
            
            tags.forEach(tag => {
                tag.addEventListener('click', function(e) {
                    e.stopPropagation(); // 阻止事件冒泡
                    showToast(`搜索标签: ${this.textContent}`);
                    // 这里可以添加标签搜索逻辑
                });
            });
        }

        // 统计卡片点击事件
        function setupStatCards() {
            const cards = document.querySelectorAll('.stat-card');
            
            cards.forEach((card, index) => {
                card.addEventListener('click', function(e) {
                    e.stopPropagation(); // 阻止事件冒泡
                    const labels = ['关注者', '关注', '帖子', '获赞'];
                    const counts = [
                        document.getElementById('followersCount').textContent,
                        document.getElementById('followingCount').textContent,
                        document.getElementById('postsCount').textContent,
                        document.getElementById('likesCount').textContent
                    ];
                    
                    showToast(`${labels[index]}: ${counts[index]}`);
                    // 这里可以添加查看详情的逻辑
                });
            });
        }

        // 头像悬停效果
        function setupAvatarEffect() {
            const avatar = document.querySelector('.user-main-avatar');
            
            if (avatar) {
                avatar.addEventListener('mouseenter', function() {
                    this.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.5)';
                    this.style.transform = 'scale(1.05)';
                });
                
                avatar.addEventListener('mouseleave', function() {
                    this.style.boxShadow = '0 4px 16px rgba(102, 126, 234, 0.3)';
                    this.style.transform = 'scale(1)';
                });
            }
        }

        // 打开用户中心
        function openUserCenter() {
            window.location.href = 'profile.html';
        }

        // 从URL参数获取用户信息
        function loadUserFromParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const userName = urlParams.get('user');
            
            if (userName) {
                const decodedUserName = decodeURIComponent(userName);
                document.getElementById('username').textContent = decodedUserName;
                document.getElementById('userName').textContent = decodedUserName;
                document.title = `用户主页 - ${decodedUserName}`;
                
                // 根据用户名设置头像
                const firstChar = decodedUserName.charAt(0);
                document.getElementById('userAvatar').textContent = firstChar;
                
                // 根据用户名设置头像背景色
                const colors = [
                    'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                    'linear-gradient(135deg, #ee9ca7 0%, #ffdde1 100%)',
                    'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                    'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                    'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                    'linear-gradient(135deg, #30cfd0 0%, #330867 100%)'
                ];
                
                const colorIndex = Math.abs(decodedUserName.charCodeAt(0)) % colors.length;
                document.getElementById('userAvatar').style.background = colors[colorIndex];
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadUserFromParams();
            loadTabContent('posts');
            setupExpertiseTags();
            setupStatCards();
            setupAvatarEffect();
        });
    </script>
</body>
</html>